{"mtime":1376624790,"js":"(function() {\n  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  $(function() {\n    var offsets, watches;\n    $(document).foundation();\n    if (Modernizr.is_mobile) {\n      defer(function() {\n        return window.scrollTo(0, 1);\n      });\n    }\n    watches = {};\n    watches.weekender = $('#weekender .svg-main').clocker();\n    watches.no1 = $('#no1 .svg-main').clocker();\n    offsets = {\n      local: false,\n      london: 1,\n      paris: 2,\n      sanfrancisco: -7\n    };\n    $('.timezones li a').click(function(e) {\n      var $el, city;\n      e.preventDefault();\n      $el = $(e.target);\n      $el.parents('.timezones').find('li').removeClass('current');\n      $el.parent().addClass('current');\n      city = $el.attr('href').split('#')[1];\n      return $.each(watches, function(i, watch) {\n        return watch.setOffset(offsets[city]);\n      });\n    });\n    return $('.al').click(function(e) {\n      var anchor;\n      e.preventDefault;\n      anchor = $(e.target).attr('href');\n      $.scrollTo($(anchor).offset().top, 1000);\n      return false;\n    });\n  });\n\n  (function($) {\n    var Clocker, defer;\n    Clocker = (function() {\n      var updateTimer;\n\n      function Clocker(elements, options) {\n        this.elements = elements;\n        this.options = options;\n        this.updateTime = __bind(this.updateTime, this);\n\n        this.startAnimation = __bind(this.startAnimation, this);\n\n        this.setOffset = __bind(this.setOffset, this);\n\n        this.init();\n        this.$ = this.elements;\n      }\n\n      Clocker.prototype.hourLoop = false;\n\n      Clocker.prototype.minuteLoop = false;\n\n      Clocker.prototype.secondLoop = false;\n\n      Clocker.prototype.localOffset = (new Date()).getTimezoneOffset() / -60;\n\n      Clocker.prototype.offsetTimezone = false;\n\n      Clocker.prototype.isAnimatingHands = false;\n\n      updateTimer = null;\n\n      Clocker.prototype.init = function() {\n        var settings,\n          _this = this;\n        settings = {\n          hourHand: '.hour-hand',\n          minuteHand: '.minute-hand',\n          secondHand: '.second-hand'\n        };\n        settings = $.extend(settings, this.options);\n        return this.elements.each(function(i, el) {\n          var $el;\n          $el = $(el);\n          _this.$hourHand = $el.find(settings.hourHand);\n          _this.$minuteHand = $el.find(settings.minuteHand);\n          _this.$secondHand = $el.find(settings.secondHand);\n          return _this.startAnimation(false);\n        });\n      };\n\n      Clocker.prototype.setOffset = function(offset) {\n        if (this.offsetTimezone !== offset && (offset || this.offsetTimezone !== this.localOffset)) {\n          this.offsetTimezone = offset;\n          return this.startAnimation();\n        }\n      };\n\n      Clocker.prototype.startAnimation = function(longTransition) {\n        var events,\n          _this = this;\n        if (longTransition == null) {\n          longTransition = true;\n        }\n        clearTimeout(this.updateTimer);\n        this.isAnimatingHands = false;\n        if (longTransition) {\n          this.$hourHand.add(this.$minuteHand).addClass('long-transition');\n        }\n        defer(function() {\n          _this.updateTime();\n          return _this.isAnimatingHands = true;\n        });\n        events = 'webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend';\n        this.$minuteHand.unbind(events);\n        return this.$minuteHand.bind(events, function() {\n          _this.isAnimatingHands = false;\n          _this.$hourHand.add(_this.$minuteHand).removeClass('long-transition');\n          return _this.$minuteHand.unbind(events);\n        });\n      };\n\n      Clocker.prototype.updateTime = function() {\n        var time,\n          _this = this;\n        time = this.getTime();\n        $.each(time, function(key, val) {\n          var $hand, degree;\n          $hand = _this[\"$\" + key + \"Hand\"];\n          degree = val.exactDeg || val.deg;\n          if (!_this.isAnimatingHands || key === 'second') {\n            if (degree > 20 && degree < 30) {\n              _this[\"\" + key + \"Loop\"] = false;\n            }\n            if (degree > 0 && degree < 20 && !_this[\"\" + key + \"Loop\"]) {\n              _this[\"\" + key + \"Loop\"] = degree;\n              $hand.addClass('no-transition');\n              return defer(function() {\n                _this.updateHand($hand, 0);\n                return defer(function() {\n                  $hand.removeClass('no-transition');\n                  return defer(function() {\n                    return _this.updateHand($hand, degree);\n                  });\n                });\n              });\n            } else {\n              return _this.updateHand($hand, degree);\n            }\n          }\n        });\n        return this.updateTimer = setTimeout((function() {\n          return _this.updateTime();\n        }), 200);\n      };\n\n      Clocker.prototype.updateHand = function($hand, deg) {\n        return $hand.css(this.prefixVendor('transform', \"rotate(\" + deg + \"deg)\"));\n      };\n\n      Clocker.prototype.getTime = function() {\n        var exactH, exactM, exactS, h, m, mil, now, s, time, utc;\n        now = new Date();\n        if (this.offsetTimezone !== false) {\n          utc = now.getTime() + now.getTimezoneOffset() * 60000;\n          now = new Date(utc + 3600000 * this.offsetTimezone);\n        }\n        h = now.getHours();\n        m = now.getMinutes();\n        s = now.getSeconds();\n        mil = now.getMilliseconds();\n        exactS = s + mil / 1000;\n        exactM = m + exactS / 60;\n        exactH = h + exactM / 60;\n        exactM = exactM + h * 60;\n        return time = {\n          hour: {\n            val: h,\n            deg: this.valToDeg(h, 12),\n            exactDeg: this.valToDeg(exactH, 12)\n          },\n          minute: {\n            val: m,\n            deg: this.valToDeg(m, 60),\n            exactDeg: this.valToDeg(exactM, 60)\n          },\n          second: {\n            val: s,\n            deg: this.valToDeg(s, 60)\n          }\n        };\n      };\n\n      Clocker.prototype.valToDeg = function(val, total) {\n        return (360 * val / total) || 360;\n      };\n\n      Clocker.prototype.prefixVendor = function(property, val) {\n        var prefix, properties, _fn, _i, _len, _ref;\n        properties = {\n          property: val\n        };\n        _ref = this.cssVendorPrefixes;\n        _fn = function(prefix) {\n          return properties[\"\" + prefix + \"-\" + property] = val;\n        };\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          prefix = _ref[_i];\n          _fn(prefix);\n        }\n        return properties;\n      };\n\n      Clocker.prototype.cssVendorPrefixes = ['-webkit', '-moz', '-ms', '-o'];\n\n      return Clocker;\n\n    })();\n    defer = function(callback) {\n      return setTimeout(callback, 1);\n    };\n    return jQuery.fn.clocker = function(options) {\n      var clocker;\n      clocker = new Clocker(this, options);\n      return clocker;\n    };\n  })(jQuery);\n\n}).call(this);\n"}